<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ankit Chauhan | Resume</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #f0f2f5;
}
.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px 20px;
}
.card {
  background: #fff;
  border-radius: 16px;
  padding: 40px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}
header {
  display: flex;
  justify-content: space-between;
  border-bottom: 2px solid #eee;
  padding-bottom: 20px;
}
h1 { margin: 0; font-size: 32px; }
h2 { margin: 5px 0 0; font-size: 18px; font-weight: 400; }
.section { margin-top: 30px; }
.skills span {
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 6px 14px;
  margin: 6px 6px 0 0;
  border-radius: 20px;
  font-size: 13px;
}
.download-btn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: #000;
  color: #fff;
  border: none;
  padding: 14px 22px;
  border-radius: 30px;
  cursor: pointer;
}
.no-animation * {
  animation: none !important;
  transition: none !important;
}
</style>
</head>

<body>

<div class="container" id="resume"></div>
<button class="download-btn" onclick="downloadPDF()">‚¨á Download PDF</button>

<script>
async function loadResume() {
  const response = await fetch("resume-data.json");
  const data = await response.json();
  renderResume(data);
}

function renderResume(data) {
  document.getElementById("resume").innerHTML = `
    <div class="card">
      <header>
        <div>
          <h1>${data.name}</h1>
          <h2>${data.title}</h2>
        </div>
        <div>
          üìß ${data.contact.email}<br>
          üìû ${data.contact.phone}<br>
          üìç ${data.contact.location}
        </div>
      </header>

      <div class="section">${data.summary}</div>

      <div class="section">
        <h3>Skills</h3>
        <div class="skills">
          ${data.skills.map(s => `<span>${s}</span>`).join("")}
        </div>
      </div>

      <div class="section">
        <h3>Work Experience</h3>
        ${data.experience.map(e =>
          `<p><strong>${e.role}</strong> ‚Äì ${e.company}<br><small>${e.duration}</small></p>`
        ).join("")}
      </div>

      <div class="section">
        <h3>Projects</h3>
        ${data.projects.map(p =>
          `<p><strong>${p.name}</strong><br>
          <small>${p.theme} | ${p.duration}</small><br>
          ${p.description}</p>`
        ).join("")}
      </div>

      <div class="section">
        <h3>Education</h3>
        ${data.education.map(e => `<p>${e}</p>`).join("")}
      </div>

      <div class="section">
        <h3>Availability</h3>
        <p><strong>Notice Period:</strong> ${data.noticePeriod}</p>
      </div>
    </div>
  `;
}

async function downloadPDF() {
  document.body.classList.add("no-animation");

  const resume = document.getElementById("resume");

  const canvas = await html2canvas(resume, {
    scale: 1.2,              // ‚Üì was 2 (major size reduction)
    useCORS: true,
    backgroundColor: "#ffffff"
  });

  // Convert to JPEG with compression
  const imgData = canvas.toDataURL("image/jpeg", 0.65); // 65% quality

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({
    orientation: "p",
    unit: "mm",
    format: "a4",
    compress: true
  });

  const pageWidth = 210;
  const pageHeight = (canvas.height * pageWidth) / canvas.width;

  pdf.addImage(imgData, "JPEG", 0, 0, pageWidth, pageHeight, undefined, "FAST");
  pdf.save("Ankit_Chauhan_Resume.pdf");

  document.body.classList.remove("no-animation");
}

loadResume();
</script>

</body>
</html>
