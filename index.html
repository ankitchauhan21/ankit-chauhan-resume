<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<title>Ankit Chauhan | Resume</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #f0f2f5;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px 20px;
}

/* IMPORTANT: keep resume separate */
#resume {
  width: 100%;
}

.card {
  background: #fff;
  border-radius: 16px;
  padding: 40px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.08);
}

header {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  flex-wrap: wrap;
  border-bottom: 2px solid #eee;
  padding-bottom: 20px;
}

h1 { margin: 0; font-size: 32px; }
h2 { margin: 5px 0 0; font-size: 18px; font-weight: 400; }

.section { margin-top: 30px; }

.skills span {
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 6px 14px;
  margin: 6px 6px 0 0;
  border-radius: 20px;
  font-size: 13px;
}

/* Button */
.download-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #000;
  color: #fff;
  border: none;
  padding: 14px 22px;
  border-radius: 30px;
  cursor: pointer;
  z-index: 9999;
}

/* Hide while generating PDF */
.hide-on-pdf {
  display: none !important;
}
  .project-card {
  border-left: 4px solid #000;
  padding: 20px 20px 20px 25px;
  margin-top: 20px;
  background: #fafafa;
  border-radius: 12px;
}

.project-header {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 10px;
}

.project-title {
  font-size: 18px;
  font-weight: 600;
}

.project-timeline {
  font-size: 13px;
  color: #555;
}

.project-meta {
  margin-top: 8px;
  font-size: 14px;
}

.tech-stack span {
  display: inline-block;
  background: #eaeaea;
  color: #000;
  padding: 5px 12px;
  margin: 6px 6px 0 0;
  border-radius: 14px;
  font-size: 12px;
}


/* Mobile layout fix */
@media (max-width: 768px) {
  header {
    flex-direction: column;
  }
  h1 { font-size: 26px; }
}
</style>
</head>

<body>

<div class="container">
  <div id="resume"></div>
</div>

<button class="download-btn" onclick="downloadPDF()">‚¨á Download PDF</button>

<script>
async function loadResume() {
  const response = await fetch("resume-data.json");
  const data = await response.json();
  renderResume(data);
}

function renderResume(data) {
  document.getElementById("resume").innerHTML = `
    <div class="card">
      <header>
        <div>
          <h1>${data.name}</h1>
          <h2>${data.title}</h2>
        </div>
        <div>
          üìß ${data.contact.email}<br>
          üìû ${data.contact.phone}<br>
          üìç ${data.contact.location}
        </div>
      </header>

      <div class="section">${data.summary}</div>

      <div class="section">
        <h3>Skills</h3>
        <div class="skills">
          ${data.skills.map(s => `<span>${s}</span>`).join("")}
        </div>
      </div>

      <div class="section">
        <h3>Work Experience</h3>
        ${data.experience.map(e =>
          `<p><strong>${e.role}</strong> ‚Äì ${e.company}<br><small>${e.duration}</small></p>`
        ).join("")}
      </div>

      <div class="section">
  <h3>Projects</h3>
  ${data.projects.map(p => `
    <div class="project-card">
      <div class="project-header">
        <div class="project-title">${p.name}</div>
        <div class="project-timeline">${p.timeline}</div>
      </div>

      <div class="project-meta">
        <strong>Role:</strong> ${p.role}
      </div>

      <div class="project-meta">
        <strong>Description:</strong>
        <p>${p.description}</p>
      </div>

      <div class="project-meta">
        <strong>Technologies:</strong>
        <div class="tech-stack">
          ${p.technologies.map(t => `<span>${t}</span>`).join("")}
        </div>
      </div>
    </div>
  `).join("")}
</div>


      <div class="section">
        <h3>Education</h3>
        ${data.education.map(e => `<p>${e}</p>`).join("")}
      </div>

      <div class="section">
        <h3>Availability</h3>
        <p><strong>Notice Period:</strong> ${data.noticePeriod}</p>
      </div>
    </div>
  `;
}

async function downloadPDF() {
  const resume = document.getElementById("resume");
  const btn = document.querySelector(".download-btn");

  btn.classList.add("hide-on-pdf");

  // Force desktop width on mobile
  const originalWidth = resume.style.width;
  resume.style.width = "1100px";

  await new Promise(r => setTimeout(r, 300));

  const canvas = await html2canvas(resume, {
    scale: 1.3,
    width: resume.scrollWidth,
    height: resume.scrollHeight,
    windowWidth: 1100,
    backgroundColor: "#ffffff",
    useCORS: true
  });

  const imgData = canvas.toDataURL("image/jpeg", 0.65);

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF("p", "mm", "a4", true);

  const pdfWidth = 210;
  const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

  pdf.addImage(imgData, "JPEG", 0, 0, pdfWidth, pdfHeight, undefined, "FAST");
  pdf.save("Ankit_Chauhan_Resume.pdf");

  resume.style.width = originalWidth;
  btn.classList.remove("hide-on-pdf");
}

loadResume();
</script>

</body>
</html>
