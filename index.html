<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<title>Ankit Chauhan | Resume</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  :root {
  --primary: #1f3c88;
  --secondary: #4b5563;
  --bg-light: #f8fafc;
  --chip-bg: #e0e7ff;
}

body {
  background: linear-gradient(135deg, #eef2ff, #f8fafc);
  font-family: 'Poppins', sans-serif;
}

.card {
  background: #ffffff;
  border-radius: 18px;
  padding: 45px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px 20px;
}

/* IMPORTANT: keep resume separate */
#resume {
  width: 100%;
}
header {
  border-bottom: 2px solid var(--primary);
  padding-bottom: 25px;
}

h1 {
  font-size: 34px;
  color: var(--primary);
}

h2 {
  color: var(--secondary);
}
.skills span,
.tech-stack span {
  background: var(--chip-bg);
  color: var(--primary);
  font-weight: 500;
}
.section { margin-top: 30px; }
.section h3 {
  margin-bottom: 10px;
  color: var(--primary);
  font-size: 20px;
  border-left: 4px solid var(--primary);
  padding-left: 10px;
}
.skills span {
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 6px 14px;
  margin: 6px 6px 0 0;
  border-radius: 20px;
  font-size: 13px;
}
.project-card {
  background: var(--bg-light);
  border-left: 5px solid var(--primary);
  padding: 22px 25px;
  border-radius: 14px;
  margin-top: 20px;
}

.project-title {
  color: var(--primary);
  font-size: 19px;
  font-weight: 600;
}

.project-timeline {
  font-size: 13px;
  color: var(--secondary);
}

/* Button */
.download-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #000;
  color: #fff;
  border: none;
  padding: 14px 22px;
  border-radius: 30px;
  cursor: pointer;
  z-index: 9999;
}
.download-btn {
  background: linear-gradient(135deg, #1f3c88, #3b82f6);
  box-shadow: 0 6px 15px rgba(59,130,246,0.4);
}
/* Hide while generating PDF */
.hide-on-pdf {
  display: none !important;
}

.project-header {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 10px;
}

.project-meta {
  margin-top: 8px;
  font-size: 14px;
}

.tech-stack span {
  display: inline-block;
  background: #eaeaea;
  color: #000;
  padding: 5px 12px;
  margin: 6px 6px 0 0;
  border-radius: 14px;
  font-size: 12px;
}


/* Mobile layout fix */
@media (max-width: 768px) {
  header {
    flex-direction: column;
  }
  h1 { font-size: 26px; }
}
</style>
</head>

<body>

<div class="container">
  <div id="resume"></div>
</div>

<button class="download-btn" onclick="downloadPDF()">‚¨á Download PDF</button>

<script>
async function loadResume() {
  const response = await fetch("resume-data.json");
  const data = await response.json();
  renderResume(data);
}

function renderResume(data) {
  document.getElementById("resume").innerHTML = `
    <div class="card">
      <header>
        <div>
          <h1>${data.name}</h1>
          <h2>${data.title}</h2>
        </div>
        <div>
          üìß ${data.contact.email}<br>
          üìû ${data.contact.phone}<br>
          üìç ${data.contact.location}
        </div>
      </header>

      <div class="section">${data.summary}</div>

      <div class="section">
        <h3>Skills</h3>
        <div class="skills">
          ${data.skills.map(s => `<span>${s}</span>`).join("")}
        </div>
      </div>

      <div class="section">
        <h3>Work Experience</h3>
        ${data.experience.map(e =>
          `<p><strong>${e.role}</strong> ‚Äì ${e.company}<br><small>${e.duration}</small></p>`
        ).join("")}
      </div>

      <div class="section">
  <h3>Projects</h3>
  ${data.projects.map(p => `
    <div class="project-card">
      <div class="project-header">
        <div class="project-title">${p.name}</div>
        <div class="project-timeline">${p.timeline}</div>
      </div>

      <div class="project-meta">
        <strong>Role:</strong> ${p.role}
      </div>

      <div class="project-meta">
        <strong>Description:</strong>
        <p>${p.description}</p>
      </div>

      <div class="project-meta">
        <strong>Technologies:</strong>
        <div class="tech-stack">
          ${p.technologies.map(t => `<span>${t}</span>`).join("")}
        </div>
      </div>
    </div>
  `).join("")}
</div>


      <div class="section">
        <h3>Education</h3>
        ${data.education.map(e => `<p>${e}</p>`).join("")}
      </div>

      <div class="section">
        <h3>Availability</h3>
        <p><strong>Notice Period:</strong> ${data.noticePeriod}</p>
      </div>
    </div>
  `;
}

async function downloadPDF() {
  const resume = document.getElementById("resume");
  const btn = document.querySelector(".download-btn");

  btn.classList.add("hide-on-pdf");

  const originalWidth = resume.style.width;
  resume.style.width = "1100px";

  await new Promise(r => setTimeout(r, 300));

  const canvas = await html2canvas(resume, {
    scale: 2,
    useCORS: true,
    backgroundColor: "#ffffff"
  });

  const imgData = canvas.toDataURL("image/jpeg", 1.0);
  const { jsPDF } = window.jspdf;

  const pdf = new jsPDF("p", "mm", "a4");
  const pdfWidth = 210;
  const pdfHeight = 297;

  const imgWidth = pdfWidth;
  const imgHeight = (canvas.height * imgWidth) / canvas.width;

  let heightLeft = imgHeight;
  let position = 0;

  pdf.addImage(imgData, "JPEG", 0, position, imgWidth, imgHeight);
  heightLeft -= pdfHeight;

  while (heightLeft > 0) {
    position = heightLeft - imgHeight;
    pdf.addPage();
    pdf.addImage(imgData, "JPEG", 0, position, imgWidth, imgHeight);
    heightLeft -= pdfHeight;
  }

  pdf.save("Ankit_Chauhan_Resume.pdf");

  resume.style.width = originalWidth;
  btn.classList.remove("hide-on-pdf");
}

loadResume();
</script>

</body>
</html>
